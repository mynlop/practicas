const dictionary = {
    "1": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/e/ec/Flag_of_Guatemala.svg",
        "constelacion": "Draco",
        "mascota": "Drake",
		"fecha": "Junio 2008",
		"ubicacion": "Ciudad de Guatemala",
		"color": "#FF0000",
		"color2": "Rojo",
		"frase": "Vibra positiva"
    },
    "2": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/f/fc/Flag_of_Mexico.svg",
        "constelacion": "Unicornio",
        "mascota": "Chuby",
		"fecha": "Junio 2008",
		"ubicacion": "Ciudad de Guatemala",
		"color": "#40E0D0",
		"color2": "Turquesa",
		"frase": "La imaginacion es el limite"
    },
    "3": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/c/cf/Flag_of_Canada.svg",
        "constelacion": "Fenix",
        "mascota": "Flamito",
		"fecha": "Junio 2008",
		"ubicacion": "Ciudad de Guatemala",
		"color": "#FFFF00",
		"color2": "Amarillo",
		"frase":  "Tengo el corazon de fuego y creo en los sueños"
    },
    "4": {
        "flag": "https://upload.wikimedia.org/wikipedia/en/a/a4/Flag_of_the_United_States.svg",
        "constelacion": "Camaleon",
        "mascota": "DUF",
		"fecha": "Julio 2011",
		"ubicacion": "Ciudad de Guatemala",
		"color": "#FFFFFF",
		"color2": "Blanco",
		"frase": "Mi color es el amor con el que pinto con el corazon"
    },
    "5": {
        "flag": "https://upload.wikimedia.org/wikipedia/en/0/05/Flag_of_Brazil.svg",
        "constelacion": "Bat´z",
        "mascota": "Wirik",
		"fecha": "Julio 2011",
		"ubicacion": "Ciudad de Guatemala",
		"color": "#8B4513",
		"color2": "Cafe",
		"frase": "Tu eres el inicio de tus sueños y el limite de tu destino"
    },
    "6": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/1/1a/Flag_of_Argentina.svg",
        "constelacion": "Ursus Minor",
        "mascota": "Nuru",
		"fecha": "Julio 2013",
		"ubicacion": "Ciudad de Guatemala",
		"color": "#0000CD",
		"color2": "Azul Marino",
		"frase": "La fuerza sale del corazon"
    },
    "7": {
        "flag": "https://upload.wikimedia.org/wikipedia/en/c/c3/Flag_of_France.svg",
        "constelacion": "Scutum",
        "mascota": "Kinich",
		"fecha": "Abril 2013",
		"ubicacion": "Antigua Guatemala, Sacatepequez",
		"color": "#191970",
		"color2": "Azul Pavo",
		"frase": "Nuestra sonrisa, el mejor escudo"
    },
    "8": {
        "flag": "https://upload.wikimedia.org/wikipedia/en/b/ba/Flag_of_Germany.svg",
        "constelacion": "Scorpius",
        "mascota": "Baxter",
		"fecha": "Noviembre 2014",
		"ubicacion": "Solola, Solola",
		"color": "#00FF00",
		"color2": "Verde Limon",
		"frase": "Inyectando gotas de amor"
    },
    "9": {
        "flag": "https://upload.wikimedia.org/wikipedia/en/0/03/Flag_of_Italy.svg",
        "constelacion": "Tortuga",
        "mascota": "Tugui",
		"fecha": "Mayo 2015",
		"ubicacion": "Chimaltenango",
		"color": "#228B22",
		"color2": "Verde musgo",
		"frase": "Sabiduria de caparazon para alegrar el corazon"
    },
    "10": {
        "flag": "https://upload.wikimedia.org/wikipedia/en/9/9a/Flag_of_Spain.svg",
        "constelacion": "Merak",
        "mascota": "Merak",
		"fecha": "Abril 2017",
		"ubicacion": "Santa Cruz del Quiche, Quiche",
		"color": "#006400",
		"color2": "Verde Oscuro",
		"frase": "----"
    },
    "11": {
        "flag": "https://upload.wikimedia.org/wikipedia/en/9/9e/Flag_of_Japan.svg",
        "constelacion": "Crater",
        "mascota": "Tepescuintle",
		"fecha": "2018",
		"ubicacion": "Escuintla",
		"color": "#40E0D0",
		"color2": "Turquesa",
		"frase": "-----"
    },
    "12": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/0/0d/Flag_of_China.svg",
        "constelacion": "Balam",
        "mascota": "Kawi",
		"fecha": "Noviembre 2010",
		"ubicacion": "Quetzaltenango",
		"color": "#800080",
		"color2": "Morado",
		"frase": "Dejando huella"
    },
    "13": {
        "flag": "https://upload.wikimedia.org/wikipedia/en/4/41/Flag_of_India.svg",
        "constelacion": "Andromeda",
        "mascota": "Gugu",
		"fecha": "Marzo 2014",
		"ubicacion": "San Pedro Sacatepequez, San Marcos",
		"color": "#8B0000",
		"color2": "Vino tinto",
		"frase": "Pintando el mundo de amor y alegria"
    },
    "14": {
        "flag": "https://upload.wikimedia.org/wikipedia/en/b/b9/Flag_of_Australia.svg",
        "constelacion": "Centaurus",
        "mascota": "Kentaury",
		"fecha": "Junio 2014",
		"ubicacion": "Huehuetenango",
		"color": "#DAA520",
		"color2": "Amarillo Mostaza",
		"frase": "Como luz y alegria, nuestro amor dibuja una sonrisa dia tras dia"
    },
    "15": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Perseo",
        "mascota": "Medu Medu",
		"fecha": "Marzo 2018",
		"ubicacion": "Tejutla, San Marcos",
		"color": "#FF0000",
		"color2": "Rojo",
		"frase": "Electrochoques de amor, por las cosas que hacemos, por la gente que amamos"
    },
	"16": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Hercules",
        "mascota": "Wonder Chip",
		"fecha": "Noviembre 2023",
		"ubicacion": "Totonicapan",
		"color": "#808080",
		"color2": "Gris",
		"frase": "Por amor siempre se hacen grandes cosas"
    },
	"17": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Crux del Sur",
        "mascota": "Cruxito",
		"fecha": "Marzo 2009",
		"ubicacion": "Coatepeque, Quetzaltenango",
		"color": "#008C00",
		"color2": "Verde grama",
		"frase": "El amor nos une"
    },
	"18": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Taurus",
        "mascota": "Torivio",
		"fecha": "Mayo 2012",
		"ubicacion": "Rethalhuleu",
		"color": "#FF00FF",
		"color2": "Fucsia",
		"frase": "Una embestida de amor"
    },
	"19": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Keh",
        "mascota": "Venadin",
		"fecha": "Febrero 2013",
		"ubicacion": "Mazatenango, Suchitepequez",
		"color": "#DEB887",
		"color2": "Beige",
		"frase": "Un salto de amor y felicidad"
    },
	"20": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Triangulum",
        "mascota": "Simba",
		"fecha": "Marzo 2016",
		"ubicacion": "Malacatan, San Marcos",
		"color": "#00008B",
		"color2": "Azul pavo",
		"frase": "Todo lo que somos y sabemos es para servir"
    },
	"21": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Pegasus",
        "mascota": "Ras",
		"fecha": "Junio 2010",
		"ubicacion": "Jalapa",
		"color": "#CF8C11",
		"color2": "Gris",
		"frase": "Dejando huellas de amor"
    },
	"22": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Leo",
        "mascota": "Leonardo",
		"fecha": "Marzo 2011",
		"ubicacion": "Chiquimula",
		"color": "#32CD32",
		"color2": "Verde Fosforecente",
		"frase": "La risa... es algo serio"
    },
	"23": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Piscis",
        "mascota": "Sonri y Sueños",
		"fecha": "Marzo 2012",
		"ubicacion": "Zacapa",
		"color": "#00FFFF",
		"color2": "Aqua",
		"frase": "De los amigos siempre cerca"
    },
	"24": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Lobo",
        "mascota": "Lupin",
		"fecha": "Marzo 2015",
		"ubicacion": "Jutiapa",
		"color": "#D48CEE",
		"color2": "Lila",
		"frase": "Una manada que ama con locura"
    },
	"25": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Aquila",
        "mascota": "Chahim",
		"fecha": "Junio 2011",
		"ubicacion": "Coban, Alta Verapaz",
		"color": "#FF1493",
		"color2": "Negro",
		"frase": "La sonrisa y la alegria es nuestro idioma universal"
    },
	"26": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Grulla",
        "mascota": "Gros",
		"fecha": "Agosto 2016",
		"ubicacion": "Salama, Baja Verapaz",
		"color": "#F8F8FF",
		"color2": "Blanco",
		"frase": "-----"
    },
	"27": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Orion",
        "mascota": "Regil",
		"fecha": "Diciembre 2009",
		"ubicacion": "San Salvador, El Salvador",
		"color": "#FF4500",
		"color2": "Naranja",
		"frase": "Orion ilumina con sonrisas tu corazon"
    },
	"28": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Cisne",
        "mascota": "Whip",
		"fecha": "Septiembre 2013",
		"ubicacion": "Santa Ana, El Salvador",
		"color": "#FF69B4",
		"color2": "Rosado",
		"frase": "Sonreimos con pasion para alegrar tu corazon"
    },
	"29": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Moan",
        "mascota": "Tlamati",
		"fecha": "Julio 2015",
		"ubicacion": "San Salvador, El Salvador",
		"color": "#191970",
		"color2": "Turqueza",
		"frase": "La sabiduria del amor es el fuego de nuestro corazon"
    },
	"30": {
        "flag": "https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg",
        "constelacion": "Canis Major",
        "mascota": "Tamarindo",
		"fecha": "Diciembre 2017",
		"ubicacion": "San Miguel, El Salvador",
		"color": "#9ACD32",
		"color2": "Verde fosforescente",
		"frase": "Sonriendo con pasion para alegrar el corazon"
    }
};

function getRandomCountries(dictionary, num) {
    const keys = Object.keys(dictionary);
    const randomKeys = [];
    while (randomKeys.length < num) {
        const randomKey = keys[Math.floor(Math.random() * keys.length)];
        if (!randomKeys.includes(randomKey)) {
            randomKeys.push(randomKey);
        }
    }
    return randomKeys;
}

const selectedCountries = getRandomCountries(dictionary, 6);


const cards = [];
selectedCountries.forEach(country => {
    const info = dictionary[country];
    cards.push({ type: 'mascota', country: country, value: info.mascota, matched: false });
    cards.push({ type: 'constelacion', country: country, value: info.constelacion, matched: false });
});
cards.sort(() => 0.5 - Math.random());


const gameBoard = document.getElementById('game-board');

cards.forEach((card, index) => {
    const cardElement = document.createElement('div');
    cardElement.classList.add('card', 'hidden');
    cardElement.dataset.index = index;
    cardElement.addEventListener('click', flipCard);
    gameBoard.appendChild(cardElement);
});

let firstCard = null;
let secondCard = null;
let matchesFound = 0;

function flipCard() {
    const cardElement = this;
    const cardIndex = cardElement.dataset.index;
    const card = cards[cardIndex];

    if (card.matched || cardElement === firstCard || cardElement === secondCard) {
        return;
    }

    if (card.type === 'flag') {
        const img = document.createElement('img');
        img.src = card.value;
        img.classList.add('flag');
        cardElement.appendChild(img);
    } else {
        cardElement.textContent = card.value;
    }
    cardElement.classList.remove('hidden');

    if (!firstCard) {
        firstCard = cardElement;
    } else if (!secondCard) {
        secondCard = cardElement;
        checkForMatch();
    }
}

function checkForMatch() {
    const firstCardIndex = firstCard.dataset.index;
    const secondCardIndex = secondCard.dataset.index;

    if (cards[firstCardIndex].country === cards[secondCardIndex].country &&
        cards[firstCardIndex].type !== cards[secondCardIndex].type) {
        cards[firstCardIndex].matched = true;
        cards[secondCardIndex].matched = true;
        matchesFound += 1;
        displayPopulationInfo(cards[firstCardIndex].country);
        highlightMatchedCards(firstCard, secondCard, cards[firstCardIndex].country);
        firstCard = null;
        secondCard = null;

        if (matchesFound === selectedCountries.length) {
            document.getElementById('winner-message').style.display = 'block';
        }
    } else {
        setTimeout(() => {
            firstCard.innerHTML = '';
            secondCard.innerHTML = '';
            firstCard.classList.add('hidden');
            secondCard.classList.add('hidden');
            firstCard = null;
            secondCard = null;
        }, 400);
    }
}

function displayPopulationInfo(country) {
    const populationInfo = document.getElementById('population-info');
    populationInfo.textContent = `Fecha ${dictionary[country].fecha}.`;
	
	const ubicacionInfo = document.getElementById('ubicacion-info');
	ubicacionInfo.textContent =  `Ubicacion ${dictionary[country].ubicacion}.`;
	
	color = dictionary[country].color;
	color2 = dictionary[country].color2;
	frase =  dictionary[country].frase;
	
	texto = `${ubicacionInfo.textContent} ${populationInfo.textContent} Color: ${color2} Frase: ${frase}`
	
	Swal.fire({
		text: texto,
		confirmButtonText: 'Continuar'
	})
}

function highlightMatchedCards(card1, card2, country) {
    const color = dictionary[country].color;
    //document.body.style.backgroundColor = color;
	card1.style.backgroundColor = color;
    card2.style.backgroundColor = color;
}
